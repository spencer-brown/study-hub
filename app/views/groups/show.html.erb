<p id="notice"><%= notice %></p>

<h2>
  <%= @group.name %>
  <div class="
    btn 
    btn-xs
    <%= @determine ? 'Remove' : 'Add' %> 
    <%= @determine ? 'btn-danger' : 'btn-success' %>
  ">
    <%= @determine ? 'Remove group'.html_safe : 'Add group'.html_safe %>
  </div>
</h2>

<div class="panel panel-default">
	<div class="panel-heading">
    <h3 class="panel-title">Etherpads</h3>
  </div>
  <ul class="list-group">
    <% @group.etherpads.each do |etherpad| %>
      <li class="list-group-item">
          <%= link_to etherpad do %>
            <%= etherpad.name %>
          <% end %>
      </li>
    <% end %>
  </ul>
</div>

<%= link_to 'Edit', edit_group_path(@group) %> |
<%= link_to 'Back', groups_path %>

<script>
  $('.Add').click(function(){
    var $this = $(this);
    var apply = "<%= apply_group_path(@group) %>";
    var remove = "<%= remove_group_path(@group) %>";
    var addtext = 'Add group';
    var removetext = 'Remove group';
    $this.toggleClass('Add');
    if($this.hasClass('Add')){
      $this.text(addtext);
      $this.removeClass('btn-danger');
      $this.addClass('btn-success');
      $.ajax({type: "GET", url: remove});
    } else {
      $this.text(removetext);
      $this.removeClass('btn-success');
      $this.addClass('btn-danger');
      $.ajax({type: "GET", url: apply});
    }
  });

    $('.Remove').click(function(){
    var $this = $(this);
    var apply = "<%= remove_group_path(@group) %>"
    var remove = "<%= apply_group_path(@group) %>"
    var addtext = 'Add group';
    var removetext = 'Remove group';
    $this.toggleClass('Add');
    if($this.hasClass('Add')){
      $this.text(addtext);
      $.ajax({type: "GET", url: apply});
      $this.removeClass('btn-danger');
      $this.addClass('btn-success');
    } else {
      $this.text(removetext);
      $this.removeClass('btn-success');
      $this.addClass('btn-danger');
      $.ajax({type: "GET", url: remove});
    }
  });
</script>